<%ARGS>
$Conditions => undef
</%ARGS>
<%INIT>
my %queues = %{ $m->caller_args(1)->{queues} || {} };

my %as_string;
$as_string{$_}++ for @{ RT->Config->Get('PriorityAsStringQueues') || [] };

# Leave it as-is if all queues use PriorityAsString; the overridden
# /Elements/SelectPriority catches this case and always shows the
# drop-down
return unless %as_string;

# Display the number input unless we know what queue's we're working
# with
return unless %queues;

# Display the number input unless all queues specified use
# PriorityAsString
return unless scalar(keys %queues) == grep {$as_string{$_}} keys %queues;

# Swap out the /Elements/SelectPriority for /Elements/SelectPriorityAsString
my ($priority) = grep {$_->{Name} eq "Priority"} @{ $Conditions };
$priority->{Value}{Path} = "/Elements/SelectPriorityAsString";
</%INIT>
